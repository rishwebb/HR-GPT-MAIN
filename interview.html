<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>InAmigos HR-GPT</title>
  
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  
  <style>
    * { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }
    
    .chat-container::-webkit-scrollbar { width: 6px; }
    .chat-container::-webkit-scrollbar-track { background: transparent; }
    .chat-container::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
    .chat-container::-webkit-scrollbar-thumb:hover { background: #444; }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes typing {
      0%, 60%, 100% { opacity: 0.3; }
      30% { opacity: 1; }
    }
    
    .message-bubble { animation: fadeInUp 0.3s ease-out; }
    
    .typing-dot { animation: typing 1.4s infinite; }
    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }
    
    .input-glow:focus {
      box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
    }

    /* Markdown Styles for the Bot Response */
    .prose p { margin-bottom: 0.5em; }
    .prose ul { list-style-type: disc; padding-left: 1.2em; margin-bottom: 0.5em; }
    .prose strong { color: #fff; font-weight: 600; }
  </style>
 </head>
 <body class="h-full bg-[#0f0f0f] text-white overflow-hidden">
  <div class="h-full flex flex-col">
    
   <header class="flex-shrink-0 border-b border-[#1a1a1a] bg-[#0f0f0f]/95 backdrop-blur-sm">
    <div class="flex items-center justify-center gap-3 px-4 py-3">
     <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-[#2a2a2a] to-[#1a1a1a] flex items-center justify-center border border-[#333] text-white">
      <svg class="w-5 h-5 text-white/90" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
      </svg>
     </div>
     <h1 id="app-title" class="text-lg font-semibold tracking-tight">HR-GPT</h1>
     <div class="text-[10px] text-green-400 flex items-center gap-1 ml-2 border border-[#262626] rounded-full px-2 py-0.5 bg-[#1a1a1a]">
        <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span> Online
     </div>
    </div>
   </header>

   <main id="chat-container" class="chat-container flex-1 overflow-y-auto px-4 py-4 space-y-4">
    <div class="message-bubble flex gap-3 max-w-[85%]">
     <div class="flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-[#2a2a2a] to-[#1a1a1a] flex items-center justify-center border border-[#333]">
      <svg class="w-4 h-4 text-white/80" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
      </svg>
     </div>
     <div class="flex-1">
      <div class="bg-[#1a1a1a] rounded-2xl rounded-tl-md px-4 py-3 border border-[#252525]">
       <p class="text-[15px] leading-relaxed text-gray-200">Hello! ðŸ‘‹ I'm your InAmigos HR Assistant. I am connected to the knowledge base. Ask me anything about the internship!</p>
      </div>
      <span class="text-[11px] text-gray-500 mt-1 ml-1 block">HR-GPT</span>
     </div>
    </div>
   </main>

   <div id="typing-indicator" class="hidden px-4 pb-2">
    <div class="flex gap-3 max-w-[85%]">
     <div class="flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-[#2a2a2a] to-[#1a1a1a] flex items-center justify-center border border-[#333]">
      <svg class="w-4 h-4 text-white/80" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
      </svg>
     </div>
     <div class="bg-[#1a1a1a] rounded-2xl rounded-tl-md px-4 py-3 border border-[#252525]">
      <div class="flex items-center gap-1"><span class="typing-dot w-2 h-2 bg-gray-400 rounded-full"></span> <span class="typing-dot w-2 h-2 bg-gray-400 rounded-full"></span> <span class="typing-dot w-2 h-2 bg-gray-400 rounded-full"></span>
      </div>
     </div>
    </div><span class="text-[11px] text-gray-500 mt-1 ml-12 block">Thinking...</span>
   </div>

   <footer class="flex-shrink-0 border-t border-[#1a1a1a] bg-[#0f0f0f] p-3 sm:p-4">
    <form id="message-form" class="flex gap-2 max-w-3xl mx-auto">
     <div class="flex-1 relative"><textarea id="message-input" rows="1" class="input-glow w-full bg-[#1a1a1a] border border-[#2a2a2a] rounded-xl px-4 py-3 text-[15px] text-white placeholder-gray-500 resize-none focus:outline-none focus:border-[#3a3a3a] transition-all" placeholder="Ask a question..." style="max-height: 120px;"></textarea>
     </div><button type="submit" id="send-btn" class="flex-shrink-0 w-11 h-11 bg-white hover:bg-gray-200 rounded-xl flex items-center justify-center transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed">
      <svg class="w-5 h-5 text-[#0f0f0f]" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
      </svg></button>
    </form>
    <p class="text-[11px] text-gray-600 text-center mt-2">Admin: Rishav â€¢ Â© InAmigos Foundation</p>
   </footer>
  </div>

  <script>
    // ==========================================
    // 1. CONFIGURATION (Your Keys & Data)
    // ==========================================
    
    // PASTE YOUR 9 KEYS HERE
    const API_KEYS = [
        "AIzaSyCuo-DpZlkM8c3nZ7vnXkb4Cy473UK7MTY",
        "AIzaSyDphorzq_wPp_nNA8oGzxXCtWQ9BGNyc9s",
        "AIzaSyCp8u7gj0B_39hXzEdWAaC9F16bv9JjNIY",
        "AIzaSyBidnvqITBESX5lX_MJEzehFXKq-fosEzM", 
        "AIzaSyAok2qfYbSys7FwOyFQ4sGRUq5xKlr50lQ",
        "AIzaSyCnFWYb8ko7f7hLvkZYV9ph_0L7Q4yL6Iw",
        "AIzaSyB3B37_uFbaXBb3fTvxXnElicKX-WdvCok", 
        "AIzaSyA8roFUnUcu1gu74XSjY6n5VRueDmLjHaw",
        "AIzaSyB8rzbrtS7MMQPDs8I9OxD0UGKmMses6Us",       
    ];

    // PASTE YOUR DATABASE TEXT HERE
    const KNOWLEDGE_BASE = `
    INAMIGOS FOUNDATION INTERNSHIP KNOWLEDGE BASE:
    - This is a non-profit internship.
    - Certificates are provided upon completion.
InAmigos GPT represents the values and professionalism of InAmigos Foundation ðŸŒ±
It should provide clear, concise, and structured responses related only to the organization, internships, tasks, fundraising, certificates, and official processes.
Behavior Guidelines:
Keep responses short, direct, and helpful
Maintain a professional, respectful HR tone with minimal emojis ðŸ˜Šâœ¨
Be supportive, firm, and policy-aligned
Prioritize clarity over length
Follow organization rules strictly
What to Avoid:
Do NOT generate long, unnecessary explanations
Do NOT engage in casual, personal, or unrelated conversations
Do NOT respond to foul, irrelevant, random, or non-organization-related questions ðŸš«
Do NOT speculate, argue, or provide unofficial opinions
Any question not related to InAmigos Foundation will be politely discouraged and redirected to relevant topics only. 
INAMIGOS FOUNDATION INTERNSHIP KNOWLEDGE BASE
TABLE OF CONTENTS
1. Introduction
2. About InAmigos Foundation
3. Internship Structure
4. Task Completion Rules
5. Fundraising Guidelines
6. Stipend Policy
7. Donation Verification Process
8. Testimonial Requirements
9. Google Drive Submission Rules
10. Communication Guidelines
11. Termination Policy
12. Certificates Policy
13. Important Notes

1. INTRODUCTION
This document serves as the official internship knowledge base for InAmigos Foundation. It is designed to provide clear, consistent, and verified information for interns and HR coordinators, ensuring smooth communication and standardized decision-making.
---
2. ABOUT INAMIGOS FOUNDATION
InAmigos Foundation is a social impact organization focused on awareness, outreach, and community-driven initiatives. The foundation operates structured internship programs that emphasize responsibility, learning by doing, and ethical participation.
--
3. INTERNSHIP STRUCTURE
The internship includes multiple task-based activities such as:
Social media engagement
Research and content creation
Awareness initiatives
Optional fundraising activities
Testimonials and documentation
Each task comes with specific instructions, timelines, and submission requirements.
---
4. TASK COMPLETION RULES
All assigned tasks must be completed within the given timeline
Partial completion is considered incomplete
Proofs and screenshots must be uploaded as instructed
Incorrect or irrelevant uploads may lead to non-evaluation
---
5. FUNDRAISING GUIDELINES
Fundraising is optional.
Completion Certificate:
Issued based on task completion
Fundraising is not mandatory for completion
Additional Benefits of Fundraising:
Eligibility for stipend
Appreciation certificate
Performance recognition
Interns only spread awareness. Donations are made directly by donors.
---
6. STIPEND POLICY
Stipend is performance-based
Linked only to fundraising
Amount equals 20% of total funds raised
No fundraising means no stipend
No fixed monthly or weekly salary
---
7. DONATION VERIFICATION PROCESS
Receipts must clearly show transaction IDs
Only verified receipts are counted
Finance team cross-checks transactions with bank statements
Receipts without transaction IDs are rejected
8. TESTIMONIAL REQUIREMENTS
Testimonials are part of internship evaluation.
Options:
Video testimonial (preferred)
Photo testimonial (only if video is not possible)
Rules:
At least one testimonial is mandatory
Failure to submit may lead to strict action
Upload as per Drive instructions
9. GOOGLE DRIVE SUBMISSION RULES
Upload tasks in their respective task folders
Follow the exact folder structure provided
Incorrect placement may result in non-evaluation
10. COMMUNICATION GUIDELINES
Maintain professional and respectful communication
Avoid unnecessary calls in group chats
Follow official instructions strictly
Repeated negligence is not acceptable
11. TERMINATION POLICY
An intern may be terminated for:
Incomplete tasks
False task completion claims
Irrelevant or misleading submissions
Refusal to complete mandatory components
Repeated disregard of instructions
---
12. CERTIFICATES POLICY
Completion certificates issued after verification
Appreciation certificates are performance-based
Certificates released only after internship completion
---
13. IMPORTANT NOTES
The internship values:
Effort
Honesty
Discipline
Consistency
Misinformation and shortcuts are strictly discouraged.
END OF DOCUMENT

    `;

    // ==========================================
    // 2. UI LOGIC (The "Creepy" Dark Theme Logic)
    // ==========================================
    
    let chatHistory = []; 

    function addUserMessage(text) {
      const container = document.getElementById('chat-container');
      const div = document.createElement('div');
      div.className = 'message-bubble flex justify-end';
      div.innerHTML = `
        <div class="max-w-[85%]">
          <div class="bg-white text-[#0f0f0f] rounded-2xl rounded-tr-md px-4 py-3">
            <p class="text-[15px] leading-relaxed whitespace-pre-wrap">${escapeHtml(text)}</p>
          </div>
          <span class="text-[11px] text-gray-500 mt-1 mr-1 block text-right">You</span>
        </div>`;
      container.appendChild(div);
      scrollToBottom();
    }

    function addBotResponse(text) {
      const container = document.getElementById('chat-container');
      const id = 'resp-' + Date.now();
      const div = document.createElement('div');
      div.className = 'message-bubble flex gap-3 max-w-[85%]';
      
      // Convert Markdown to HTML
      const htmlContent = marked.parse(text);

      div.innerHTML = `
        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-[#2a2a2a] to-[#1a1a1a] flex items-center justify-center border border-[#333] text-white">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
            </svg>
        </div>
        <div class="flex-1">
          <div class="bg-[#1a1a1a] rounded-2xl rounded-tl-md px-4 py-3 border border-[#252525]">
            <div class="text-[15px] leading-relaxed text-gray-200 prose prose-invert max-w-none">
                ${htmlContent}
            </div>
          </div>
          <span class="text-[11px] text-gray-500 ml-1">HR-GPT</span>
        </div>`;
      container.appendChild(div);
      scrollToBottom();
    }

    function escapeHtml(text) {
      const d = document.createElement('div');
      d.textContent = text;
      return d.innerHTML;
    }

    function scrollToBottom() {
      const c = document.getElementById('chat-container');
      c.scrollTop = c.scrollHeight;
    }

    function setTyping(show) {
      const indicator = document.getElementById('typing-indicator');
      indicator.classList.toggle('hidden', !show);
      if (show) scrollToBottom();
    }

    function autoResize(t) {
      t.style.height = 'auto';
      t.style.height = Math.min(t.scrollHeight, 120) + 'px';
    }

    // ==========================================
    // 3. THE BRAIN (Gemini Integration)
    // ==========================================

    document.getElementById('message-form').addEventListener('submit', async e => {
      e.preventDefault();
      const input = document.getElementById('message-input');
      const text = input.value.trim();
      if (!text) return;

      // 1. Show User Message
      addUserMessage(text);
      input.value = '';
      autoResize(input);
      setTyping(true);

      try {
          // 2. Select Key
          const randomKey = API_KEYS[Math.floor(Math.random() * API_KEYS.length)];

          // 3. Build Payload
          const payload = {
              contents: [{
                  role: "user",
                  parts: [{ text: `
                      SYSTEM: You are the InAmigos HR Assistant. Answer professionally using ONLY this data:
                      ${KNOWLEDGE_BASE}
                      
                      HISTORY: ${JSON.stringify(chatHistory.slice(-4))}
                      USER QUERY: ${text}
                  `}]
              }]
          };

          // 4. Call Google (Updated to use Gemini 2.0 Flash-Lite which has the quota)
          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-lite-001:generateContent?key=${randomKey}`, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(payload)
          });

          const data = await response.json();
          if (data.error) throw new Error(data.error.message);

          const botReply = data.candidates[0].content.parts[0].text;
          
          // 5. Show Bot Response
          setTyping(false);
          addBotResponse(botReply);
          
          chatHistory.push({ role: "user", text: text });
          chatHistory.push({ role: "model", text: botReply });

      } catch (error) {
          setTyping(false);
          addBotResponse("âš ï¸ Connection Error: " + error.message);
      }
    });

    document.getElementById('message-input').addEventListener('input', e => {
      autoResize(e.target);
    });

    document.getElementById('message-input').addEventListener('keydown', e => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        document.getElementById('message-form').dispatchEvent(new Event('submit'));
      }
    });
  </script>
 </body>
</html>
